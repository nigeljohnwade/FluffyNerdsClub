<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        @font-face {
            font-family: "Clash";
            src: url("fonts/ClashofClansFont/Supercell-magic-webfont.ttf");
        }

        body {
            font-family: "Clash",serif;
            font-size: 17px;
        }
    </style>
</head>

<body>
    <h1>Fluffy Nerds Club</h1>
    <div id="app-players">
    </div>
    <div id="app-clan">
    </div>
    <div id="app-battle">
    </div>
    <script src="clashAPI.js"></script>
    <script src="clanData.js"></script>
    <script src="clash_data/clashDataBattle06122018.js"></script>
    <script>
    // const clashApiKey = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiIsImtpZCI6IjI4YTMxOGY3LTAwMDAtYTFlYi03ZmExLTJjNzQzM2M2Y2NhNSJ9.eyJpc3MiOiJzdXBlcmNlbGwiLCJhdWQiOiJzdXBlcmNlbGw6Z2FtZWFwaSIsImp0aSI6IjIwMTdkMWExLWQ3Y2YtNDNkYy1hYjI5LTM1ODE4ODNiMDFmYSIsImlhdCI6MTU0MjEyMDM4MSwic3ViIjoiZGV2ZWxvcGVyLzUwZWFjMmYwLTBhNDItNTJiMS0zMDM1LTZiZWI3ODM5N2M3MSIsInNjb3BlcyI6WyJyb3lhbGUiXSwibGltaXRzIjpbeyJ0aWVyIjoiZGV2ZWxvcGVyL3NpbHZlciIsInR5cGUiOiJ0aHJvdHRsaW5nIn0seyJjaWRycyI6WyIxMDQuMjQuMTE5Ljk4Il0sInR5cGUiOiJjbGllbnQifV19.EaHP95tdg08vixCoPuDlta4cwkxq88yu44q-MMKpZXzfWeQ-DQpY4FmSxb7bWPwqfKwUqGCiURHfm4BA8oY3Nw";
    // const clashApiPlayerUrl = `https://api.clashroyale.com/v1/players/%`;
    // fetch(clashApiPlayerUrl, {headers:{'Authorisation': `Bearer ${clashApiKey}`}})
    //     .then(response => console.log(response.json()));
    </script>
    <script type="application/javascript">
        console.log(clashBattleData);
        console.log(clanData);
        const clashApiPlayer = (rootElement, playerData) => {
            const app = document.querySelector(rootElement);
            const h1 = document.createElement('h1');
            h1.textContent = `${playerData.name} (${playerData.tag})`;
            const favoutireCardIcon = document.createElement('img');
            favoutireCardIcon.src = playerData.currentFavouriteCard.iconUrls.medium;
            h1.appendChild(favoutireCardIcon);
            app.appendChild(h1);
            const cards = document.createElement('div');
            const cardsTitle = document.createElement('h2');
            cards.appendChild(cardsTitle);
            cardsTitle.textContent = "Current deck";
            currentDeckCardElements = playerData.currentDeck.map((card) => {
                let cardTemp = document.createElement('img');
                cardTemp.src = card.iconUrls.medium;
                return cardTemp;
            });
            currentDeckCardElements.forEach((element) => {
                cards.appendChild(element);
            });
            app.appendChild(cards);
            console.log(currentDeckCardElements);
            const league = document.createElement('p');
            league.textContent = `Best season trophies: ${playerData.leagueStatistics.bestSeason.trophies}
        Current season best trophies: ${playerData.leagueStatistics.currentSeason.bestTrophies}
        `;
            app.appendChild(league);
            const h2 = document.createElement('h2');
            h2.textContent = `${playerData.clan.name} (${playerData.clan.tag})`;
            app.appendChild(h2);
        };
        const clashApiClan = (rootElement, clanData) => {
            const app = document.querySelector(rootElement);
            const clanMembers = clanData.memberList.map(element => {
                return `<li>${element.name} (${element.tag})</li>`;
            });
            console.log(clanMembers);
            const clanMemberList = document.createElement('ul');
            clanMembers.forEach(element => {
                clanMemberList.innerHTML += element;
            });
            app.appendChild(clanMemberList)
        };
        const clashApiBattle = (rootElement, clashBattleData) => {
            const app = document.querySelector(rootElement);
            console.log(clashBattleData);
            battles = clashBattleData.map(element => {
                const battleElement = document.createElement('div');
                battleElement.textContent = `${element.type} ${element.gameMode.name} - ${element.battleTime} - ${element.opponent[0].name}`;
                return battleElement;
            });
            battles.map(element => {
                app.appendChild(element);
            })

        };
        getPlayer('NIGEL').then(data => {
            console.log(data);
            clashApiPlayer('#app-players', data);
        });
        getPlayer('JENNY').then(data => {
            console.log(data);
            clashApiPlayer('#app-players', data);
        });
        clashApiClan('#app-clan', clanData);
        clashApiBattle('#app-battle', clashBattleData);
    </script>
</body>

</html>